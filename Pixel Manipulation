import cv2
import numpy as np

def encrypt_image(image_path, key):
  
    image = cv2.imread(image_path)
    encrypted = image.copy()
    

    for i in range(encrypted.shape[0]):
        for j in range(encrypted.shape[1]):
            for k in range(encrypted.shape[2]):
                encrypted[i, j, k] = encrypted[i, j, k] ^ key
    
    cv2.imwrite("encrypted.png", encrypted)
    print("Image encrypted and saved as 'encrypted.png'")
    return encrypted


def decrypt_image(encrypted_path, key):
    
    encrypted = cv2.imread(encrypted_path)
    decrypted = encrypted.copy()
 
    for i in range(decrypted.shape[0]):
        for j in range(decrypted.shape[1]):
            for k in range(decrypted.shape[2]):
                decrypted[i, j, k] = decrypted[i, j, k] ^ key
    
    cv2.imwrite("decrypted.png", decrypted)
    print("Image decrypted and saved as 'decrypted.png'")
    return decrypted

encrypt_image("input.png", 123)   
decrypt_image("encrypted.png", 123)